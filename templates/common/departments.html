{% extends 'base.html' %}
{% block title %}Departments{% endblock %}

{% block content %}
<h2 class="mb-4">Departments</h2>
{% if user.role == 'manager' %}
<form method="post" class="mb-3">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Add Department</button>
</form>
{% endif %}

<ul class="list-group">
    {% for department in departments %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        <span>
            <strong>{{ department.name }}</strong>{% if department.description %} - {{ department.description }}{% endif %}
        </span>
        {% if user.role == 'manager' %}
        <form method="post" action="{% url 'delete_department' department.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        </form>
        {% endif %}
    </li>
    {% empty %}
    <li class="list-group-item">No departments available.</li>
    {% endfor %}
</ul>
{% endblock %}

